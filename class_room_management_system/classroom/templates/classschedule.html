{% extends 'main.html' %}
{% load static %}


{% block content %}
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

<style>
    body{margin-top:20px;}
.idance .classes-details ul.timetable {
    margin: 0 0 22px;
    padding: 0;
}
.idance .classes-details ul.timetable li {
    list-style: none;
    font-size: 15px;
    color: #7f7f7f;
}
idance .timetable {
    max-width: 900px;
    margin: 0 auto;
}
.idance .timetable-item {
    border: 1px solid #d8e3eb;
    padding: 15px;
    margin-top: 20px;
    position: relative;
    display: block;
}
@media (min-width: 768px) {
    .idance .timetable-item {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
    }
}
.idance .timetable-item-img {
    overflow: hidden;
    height: 100px;
    width: 100px;
    display: none;
}
.idance .timetable-item-img img {
    height: 100%;
}
@media (min-width: 768px) {
    .idance .timetable-item-img {
        display: block;
    }
}
.idance .timetable-item-main {
    -webkit-box-flex: 1;
    -ms-flex: 1;
    flex: 1;
    position: relative;
    margin-top: 12px;
}
@media (min-width: 768px) {
    .idance .timetable-item-main {
        margin-top: 0;
        padding-left: 15px;
    }
}
.idance .timetable-item-time {
    font-weight: 500;
    font-size: 16px;
    margin-bottom: 4px;
}
.idance .timetable-item-name {
    font-size: 14px;
    margin-bottom: 19px;
}
.idance .btn-book {
    padding: 6px 30px;
    width: 100%;
}
.idance .timetable-item-like {
    position: absolute;
    top: 3px;
    right: 3px;
    font-size: 20px;
    cursor: pointer;
}
.idance .timetable-item-like .fa-heart-o {
    display: block;
    color: #b7b7b7;
}
.idance .timetable-item-like .fa-heart {
    display: none;
    color: #f15465;
}
.idance .timetable-item-like:hover .fa-heart {
    display: block;
}
.idance .timetable-item-like:hover .fa-heart-o {
    display: none;
}
.idance .timetable-item-like-count {
    font-size: 12px;
    text-align: center;
    padding-top: 5px;
    color: #7f7f7f;
}
.idance .timetable-item-book {
    width: 200px;
}
.idance .timetable-item-book .btn {
    width: 100%;
}
.idance .schedule .nav-tabs {
    border-bottom: 2px solid #104455;
}
.idance .schedule .nav-link {
    -webkit-box-flex: 1;
    -ms-flex: 1;
    flex: 1;
    font-size: 12px;
    text-align: center;
    text-transform: uppercase;
    color: #3d3d3d;
    font-weight: 500;
    -webkit-transition: none;
    -o-transition: none;
    transition: none;
    border-radius: 2px 2px 0 0;
    padding-left: 0;
    padding-right: 0;
    cursor: pointer;
}
@media (min-width: 768px) {
    .idance .schedule .nav-link {
        font-size: 16px;
    }
}
.idance .schedule .nav-link.active {
    background: #104455;
    border-color: #104455;
    color: #fff;
}
.idance .schedule .nav-link.active:focus {
    border-color: #104455;
}
.idance .schedule .nav-link:hover:not(.active) {
    background: #46c1be;
    border-color: #46c1be;
    color: #fff;
}
.idance .schedule .tab-pane {
    padding-top: 10px;
}
</style>
<div class="idance">
    <div class="schedule content-block">
        <div class="container">
            <h2 data-aos="zoom-in-up" class="aos-init aos-animate">Schedule</h2>
        
            <div class="timetable">
        
              
        
              <div class="tab-content">
                <div class="tab-pane show active">
                  <div class="row">
        
                    <!-- Schedule Item 1 -->
                    <div class="col-md-6">
                      <div class="timetable-item">
                        <div class="timetable-item-main">
                          <div class="timetable-item-time">8:00 - 9:00</div>
                          <div class="timetable-item-name"></div>
                            {% if 8 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('8')">Book</button>
                            {% endif %}

                        </div>
                      </div>
                    </div>
        
                    <!-- Schedule Item 2 -->
                    
                    <div class="col-md-6">
                        <div class="timetable-item">
                          <div class="timetable-item-main">
                            <div class="timetable-item-time">9:00 - 10:00</div>
                            <div class="timetable-item-name"></div>
                            {% if 9 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('9')">Book</button>
                            {% endif %}
  
                          </div>
                        </div>
                      </div>
        
                    <!-- Schedule Item 3 -->
                    <div class="col-md-6">
                        <div class="timetable-item">
                          <div class="timetable-item-main">
                            <div class="timetable-item-time">10:00 - 11:00</div>
                            <div class="timetable-item-name"></div>
                            {% if 10 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('10')">Book</button>
                            {% endif %}  
                          </div>
                        </div>
                      </div>
        
                    <!-- Schedule Item 4 -->
                    <div class="col-md-6">
                        <div class="timetable-item">
                          <div class="timetable-item-main">
                            <div class="timetable-item-time">11:00 - 12:00</div>
                            <div class="timetable-item-name"></div>
                            {% if 11 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('11')">Book</button>
      
                            {% endif %}  
                          </div>
                        </div>
                      </div>
        
                    <!-- Schedule Item 5 -->
                    <div class="col-md-6">
                        <div class="timetable-item">
                          <div class="timetable-item-main">
                            <div class="timetable-item-time">12:00 - 13:00</div>
                            <div class="timetable-item-name"></div>
                            {% if 12 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('12')">Book</button>
                            {% endif %}  
                          </div>
                        </div>
                      </div>
        
                    <!-- Schedule Item 6 -->
                    <div class="col-md-6">
                        <div class="timetable-item">
                          <div class="timetable-item-main">
                            <div class="timetable-item-time">13:00 - 14:00</div>
                            <div class="timetable-item-name"></div>
                            {% if 13 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('13')">Book</button>
                            {% endif %}  
                          </div>
                        </div>
                      </div>

                      <!-- Schedule Item 7 -->
                    <div class="col-md-6">
                        <div class="timetable-item">
                          <div class="timetable-item-main">
                            <div class="timetable-item-time">14:00 - 15:00</div>
                            <div class="timetable-item-name"></div>
                            {% if 14 in schedule%}
                            <a class="btn btn-primary btn-danger"> Booked</a>
                            {% else %}
                            <button class="btn btn-primary btn-book" onclick="func('14')">Book</button>
                            {% endif %}  
                          </div>
                        </div>
                      </div>
          
                      <!-- Schedule Item 8 -->
                      
                      <div class="col-md-6">
                          <div class="timetable-item">
                            <div class="timetable-item-main">
                              <div class="timetable-item-time">15:00 - 16:00</div>
                              <div class="timetable-item-name"></div>
                              {% if 15 in schedule%}
                              <a class="btn btn-primary btn-danger"> Booked</a>
                              {% else %}
                              <button class="btn btn-primary btn-book" onclick="func('15')">Book</button>
                              {% endif %}    
                            </div>
                          </div>
                        </div>
          
                      <!-- Schedule Item 9 -->
                      <div class="col-md-6">
                          <div class="timetable-item">
                            <div class="timetable-item-main">
                              <div class="timetable-item-time">16:00 - 17:00</div>
                              <div class="timetable-item-name"></div>
                              {% if 16 in schedule%}
                              <a class="btn btn-primary btn-danger"> Booked</a>
                              {% else %}
                              <button class="btn btn-primary btn-book" onclick="func('16')">Book</button>
                              {% endif %}    
                            </div>
                          </div>
                        </div>
          
                      <!-- Schedule Item 10 -->
                      <div class="col-md-6">
                          <div class="timetable-item">
                            <div class="timetable-item-main">
                              <div class="timetable-item-time">17:00 - 18:00</div>
                              <div class="timetable-item-name"></div>
                              {% if 17 in schedule%}
                              <a class="btn btn-primary btn-danger"> Booked</a>
                              {% else %}
                              <button class="btn btn-primary btn-book" onclick="func('17')">Book</button>
                              {% endif %}    
                            </div>
                          </div>
                        </div>
          
                      <!-- Schedule Item 11 -->
                      <div class="col-md-6">
                          <div class="timetable-item">
                            <div class="timetable-item-main">
                              <div class="timetable-item-time">18:00 - 19:00</div>
                              <div class="timetable-item-name"></div>
                              {% if 18 in schedule%}
                              <a class="btn btn-primary btn-danger"> Booked</a>
                              {% else %}
                              <button class="btn btn-primary btn-book" onclick="func('18')">Book</button>
                              {% endif %}    
                            </div>
                          </div>
                        </div>
          
                      <!-- Schedule Item 12 -->
                      <div class="col-md-6">
                          <div class="timetable-item">
                            <div class="timetable-item-main">
                              <div class="timetable-item-time">19:00 - 20:00</div>
                              <div class="timetable-item-name"></div>
                              {% if 19 in schedule%}
                              <a class="btn btn-primary btn-danger"> Booked</a>
                              {% else %}
                              <button class="btn btn-primary btn-book" onclick="func('19')">Book</button>
                              {% endif %}    
                            </div>
                          </div>
                        </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>
  </div>


  <script>

    var date = '{{date}}';
    let csrftoken = getCookie('csrftoken');
    function func(time){
      var time = parseInt(time)
      var classroom_primary_key = '{{classroom_pk}}'
      fetch('/update/',{
        method:'POST',
        headers:{
          'Content-Type':'application/json',
          'X-CSRFToken':csrftoken,
        },
        body:JSON.stringify({
          'time':time,
          'date':date,
          'classroom_primary_key':classroom_primary_key,
        }),
      })
      .then((response)=>{
        console.log(response)
        location.reload();
      });

      

    }

    function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

</script>

{% endblock content %}